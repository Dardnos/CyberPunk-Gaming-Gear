<section class="cart" th:fragment="showCartProducts(items)">
    <h3 id="cart-title"> Shopping Cart </h3>
    <div class="cart-grid" th:each="item : ${items}" th:product-id="@{${item.product.id}}">
        <div th:replace = "components/cart-products:: createItemCard(${item}, false)"></div>
    </div>
</section>

<section class="cart" th:fragment="showPurchasedItems(items)">
    <a class="purchase-card-instance" th:each="item : ${purchase.items}" th:product-id="@{${item.product.id}}"  th:href="@{/products/{id} (id=${item.product.id})}">
        <div th:replace = "components/cart-products :: createItemCard(${item}, true)"></div>
    </a>
</section>

<div class="cart-product" th:fragment="createItemCard(item, isBought)">
    <div class="cart-product">
        <div class="div-row mobile">
            <a th:href="@{/products/{id} (id=${item.product.id})}">
                <picture th:replace="~{components/webpImage ::  webp(${item.product.image}, ${item.product.name})}"></picture>
            </a>
            <div class="div-product-info">
                <h4 th:text="${item.product.name}"></h4>
                <p class="description" th:text="${item.product.shortDescription}"></p>
            </div>
        </div>
        <div class="div-row mobile price">
            <div class="div-column">
                <p>Price per Item</p>
                <p><span th:text="${item.product.price}"></span> kr</p>
            </div>
            <div class="div-column">
                <p>Total product price</p>
                <p th:if="${isBought}"><span th:id="|totalPrice-${item.product.id}|" th:text="${item.productPriceAtPurchase * item.getAmount()}"></span> kr</p>
                <p th:if="${not isBought}"><span th:id="|totalPrice-${item.product.id}|" th:text="${item.product.price * item.getAmount()}"></span> kr</p>
            </div>
            <div class="div-column">
                <p>Amount Ordered</p>
                <div class="div-row order" th:if="${not isBought}">
                    <button class="decrease boring-button" aria-label="decrease amount button" th:data-product="${item.product.id}" th:disabled="${item.getAmount() <= 1} ?: 'disabled'">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 12h-15" />
                        </svg>
                    </button>
                    <p th:id="|amount-${item.product.id}|" th:text="${item.getAmount()}"></p>
                    <button class="increase boring-button" aria-label="Increase amount button" th:data-product="${item.product.id}">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
                        </svg>
                    </button>
                </div>
                <p th:if="${isBought}" th:id="|amount-${item.product.id}|" th:text="${item.getAmount()}"></p>
            </div>
            <div th:remove="${isBought} ? all" class="div-column">
                <p>Delete</p>
                <button class="delete remove-from-cart boring-button" aria-label="remove from cart button" th:data-product-id="${item.product.id}"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                </svg>
                </button>
            </div>
        </div>
    </div>
</div>